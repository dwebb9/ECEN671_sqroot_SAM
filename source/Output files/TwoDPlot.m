clear; close all;

%needs prediction

gt_raw = [0,0,0, 2,1,0.4 ,5,4,0.7 ,8,4,0.8 ,9,4,0.5, 12,4,0.2, 16,4,0.1, 18,4,0.05, 19,5,0.3, 17,8,0.9, 15,8,1.5, 13,8,1.9, 11,6,2.8, 10,6,3.2, 9,6,3.9, 7,7,3.2, 6,9,2.5, 4,9,3.2, 3,9,3.1, 3,7,3.9, 3,4,4.7, 5,4,5.6, 8,4,6.1, 9,4,0, 12,4,0.1];

x_raw = [-3.43424e-05
  0.00022157
    -1.01279
     3.36764
    -2.00775
    -2.57039
     13.0496
    -6.26096
    -4.40497
     14.3635
    -22.1502
    -2.92957
     13.9577
    -25.2036
    -1.19881
     16.5178
    -25.3626
    -1.76277
     21.3016
    -38.4701
    -2.86825
     21.5531
    -43.7505
    -3.76807
     23.2778
    -44.9926
    -4.43734
     32.8692
    -39.3844
    -2.56252
     29.8577
    -40.3043
    -1.52223
     28.6128
    -37.7461
     -1.2685
     21.5235
    -24.7165
   -0.175443
     20.0163
    -23.8054
    -1.62783
     20.6377
    -22.7747
    -1.20958
      22.105
    -21.1641
    -3.50476
     26.2509
    -19.6664
     -3.8882
      26.989
    -14.7359
    -2.12704
     28.8083
    -13.9752
   -0.216408
     23.5338
    -14.1017
    0.735311
     10.5395
    -10.7284
   -0.184493
     10.7839
    -15.3427
     0.39307
     9.31623
    -27.2722
    0.807915
     4.43869
    -39.0683
    -6.30485
   -0.281898
    -58.0168
    -6.39009
     15.8353
    -9.37641
     11.7538
    -23.7429
     17.9899
    -36.3996
     28.9262
    -18.6619
     21.3522
    -23.2602
     27.8427
    -37.6122];

numLandmarks = 6;
N = (length(x_raw) - numLandmarks*2)/3;

gt_x = zeros(N,1);
gt_y = zeros(N,1);
gt_theta = zeros(N,1);

x = zeros(N,1);
y = zeros(N,1);
theta = zeros(N,1);

pred_x = zeros(N,1);
pred_y = zeros(N,1);
pred_theta = zeros(N,1);

for i = 1:N
    x(i) = x_raw(i*3 - 2);
    y(i) = x_raw(i*3 - 1);
    theta(i) = x_raw(i*3);
    
    gt_x(i) = gt_raw(i*3 - 2);
    gt_y(i) = gt_raw(i*3 - 1);
    gt_theta(i) = gt_raw(i*3);
end

plot(x,y);
hold on;
plot(gt_x,gt_y);
legend('Square Root SAM','Ground Truth');